on:
  push:
    branches: [ main ]

jobs:
  update-package:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
    
      - name: Get artifact id
        run: echo ${{ github.event.commits[0].id }}
      - name: Download artifact
        uses: dawidd6/action-download-artifact@v2
        with:
          workflow: test-package.yml
          commit: ${{ github.event.commits[0].id }}
          workflow_conclusion: success
      - run: mv ${{ github.event.commits[0].id }}/package-lock.json ./package-lock.json
      - run: git status
      - run: git config user.email "ghactions@mku.com" && git config user.name "GH Actions"

      - run: git add package-lock.json
      - run: git commit -m "Updated package-lock.json"
      - run: git push